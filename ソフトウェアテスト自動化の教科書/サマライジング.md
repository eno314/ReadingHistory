# ソフトウェアテスト自動化の教科書 サマライジング

## 装丁読み

- ソフトウェア
- テスト
- 自動化
- 教科書
- 現場の失敗から学ぶ
- 設計プロセス
- 現役テストエンジニア
- 自動化を成功させる
- 4つのプロセス
  - 計画、設計、実施、振り返り

## はじめに

- 目的 : テスト工数の削減
- 目標 : テストを自動化し、テストを管理できる状態にし、効率の良いテストプロセスの構築できるようになる
- 内容 : 自動テストの設計とプロセスにフォーカス
  - リスクを抑えて、工数を削減できる、自動化の進め方の解説
  - 自動テストの現場の失敗例から、自動化プロセスの理解を深めることができる

## 1章 : ソフトウェアテストとテストの課題を知る

### テストの4つの工程

1. 計画
   - どんなテストをするか定義する
   - 主にやること : テストの方針、実施範囲、戦略、人員、スケジュール、管理方法
2. 設計
   - どんなテストをどんな手段で実施するのか設計する
   - 最終的にはテストケースを作成する
   - 主にやること : テスト観点の詳細化、テスト対象の詳細化（機能細分化）、使用するテスト技法の検討と適応範、テストパターンの洗い出し、手順・期待値・使用するデータを決める
3. テストの実施
   - 設計したテストケースをもとにテストを実施し、不具合を検出・管理する
   - テストの終了基準に合致すればテスト終了
   - 満たさなければ修正を行い、再度実施
4. 振り返り
   - テストプロセス全体の評価と、次の実施に向けて改善点の洗い出し

### 6つのテスト技法

1. 同値分割
   - 基本。入力する値をグループ化して代表的な値だけを使う。
2. 境界値分析
   - 出力結果が変わる境目の値を使う。同値分割とセットでよく使う。
3. デシジョンテーブル
   - 入力と出力を抜け漏れなく洗い出すための表
   - 複数条件が組み合わさった結果を明確にできるが、条件が多くなった場合にパターン数が膨大になる
4. 組み合わせ技法
   - 抜け漏れ・重複なく、必要な条件を決めるための基準を設ける技法
   - ツールを使えば簡単にパターンを洗い出せる
5. 状態遷移テスト
   - 仕様で決められている複数の状態とイベントを表で表現したもの
   - 状態遷移図 : 状態がどのように遷移するのか表現した図。システム全体を把握でき仕様の抜け漏れが確認しやすいが、システムが大きいとわかりにくくなる。
   - 状態遷移表 : 状態とイベントを表で表現したもの。仕様をまとめやすく抜け漏れも確認しやすいが、これもシステムが大きくなると表もわかりにくくなる。
6. 回帰試験
   - 修正が他に影響が無いか、一度やったテストも再確認するテスト
   - 手動で修正のたびに行うのは非効率。なるべく自動化する。

### 主なテストツールの種類

- テスト・テストウェアのマネジメント支援ツール
  - テスト進行状況、テスト漏れ、不具合の対策状況を管理する
- 静的テストの支援ツール
  - ソフトウェアを動かさずに、ソースコードから不具合を検出する
- テスト設計・実装の支援ツール
  - テストケースの作成とテストデータ作成を支援するツール
- テスト実行・結果記録の支援ツール
  - 自動化ツール
- 性能計測・動的解析の支援ツール
  - ソフトウェアを動かしながら解析するツール
- 特定のテストに対する支援ツール

## 2章 : 自動テストの正しい知識を身につける

### 自動テストの目的

- コスト削減と効率化
- どれだけ工数を削減できたかにこだわるべき

### 自動テストの役割

- 品質向上ではなく、デグレの確認
- 品質をあげる（不具合を出す）テストをするには、スクリプトで毎回同じテストをするより、人が考えながら行うほうが有効
- すべてのテストを自動化するのではなく、期待結果が決まっていて何度も実施する回帰テストを自動化するべき
- テスト自動化は、あくまで工数削減する手段の1つ。テスト自動化以外でも工数を削減できることは他にもある。自動化で削減できた工数を他の効率化を考える時間に当てると良い。

### 自動テストを失敗しないためのポイント

- まず自動化するべき箇所を見極めて、それを実現できるツール選定し、最も自動化するべき箇所からスクリプトを作成する
- 自動化に向くテストを自動化する
  - 膨大なパターン数のテスト、何度も繰り返すテスト、複雑さや正確性が必要なテスト手順を要するテスト、何度も実施すべき優先度が高いテスト
- 自動化に向かないテストは自動化しない
  - スクリプトを作成しても頻繁にスクリプトの修正が発生するテスト（仕様変更が多い、実施するたび結果が変わる）
  - 人間の想像力が必要なテスト（ランダムテスト、ユーザビリティテスト、不具合だしを目的としたテスト）
  - なんどもテストする必要がない優先度が低いテスト
- 自動化するテストの方針や対象に合致した自動化ツールの選定する
  - 自動化テストの成功に重要なのは、ツールではなく、自動化の方針を決めるプロセス
  - 全体に展開せずに少数精鋭が使うようにする
- 自動化テストの方針を決める
- テスト自動化の2つの手法を知る
  - 順次実行型テストの自動化 :  様々な種類で広範囲なテストを何度も実行させる自動化
  - データ駆動型テストの自動化 : データのパターン数だけ繰り返し動作させる、1回だけでも工数削減可能な自動化

## 3章 : 自動化を成功させるための4つのプロセス

### プロセス1 : 計画

- 自動化の方針を決める
  - まずゴールをしっかり定め、それに沿って自動化の優先順位と適応範囲を決める(すべてを自動化しようとしない)
  - 自動化するものを決める基準はプロジェクトによって異なるが、基本は「デグレが起きたときのリスク」で考えること
- 自動化の対象になりそうな試験項目の内容を分析する
  - 実施手順、事前条件、期待結果が明確になっているか確認する
  - これらが明確になっていないと自動化する際の作業に支障がでるので、この段階で明確にしておく
- 自動化ツールの品質・仕様や評価対象のシステムを分析する
  - ツールや評価対象のシステムの仕様の理解が深いほど、テストケースの自動化の際に応用が効く
- 自動化設計手法を決め、テストツールを選定する
  - この時点で、テストの自動化ができるかを大まかに確認する
- テスト計画を作成する
  - 「方針」「対象/非対称」「作業範囲と期間」「手動と自動の工数比較」「メリット/デメリット」「リスク」を書き出す

### プロセス2 : 設計

- 自動化の処理概要をまとめる
  - 順次実行型テストの場合 : 自動化するテスト項目とその数を決める
  - データ駆動型テストの場合 : 処理フローを決める
- 自動化のスクリプト構成を考える
  - 普通のプログラムと同じように共通化や入出の場所、エラー処理を決めたり、ルールを作る

### プロセス3 : テストの実施

- スクリプトを作成する
  - 具体的なスクリプト作成するための技術は、この本では割愛
- スクリプトを実行する
  - 実行中に人が動作確認するために張り付いている状況は避ける。せっかく自動化したので人はテストの結果を見るだけ。

### プロセス4 : 振り返り

- 1回の失敗であきらめず、振り返りを行って次に活かすことで、成功につなげる
- 計画に対しての実績の検証を行う（具体的な内容は以下）
  - 計画していた削減工数と、実績値との比較
  - スクリプト実行時に発生した問題と対策
  - スクリプトに追加が必要な共通機能の検討と導入
  - さらに工数削減するための対策
  - 事前に出した懸念点が解消できたか
  - 実装した自動化が有効だったか

## 4章 : データ駆動型テストの自動化を実践する

- データ駆動型テストの自動化
  - 同じロジックに対して大量のパターンのテストを自動化する
  - 複数の入力パターンを確認したい場合に有効
- データ駆動型テストの自動化のメリット
  - 大量のデータ入力を高い精度で行える
  - スクリプトの作成も容易で、仕様変更が発生した場合でも簡単に修正できる

## 5章 : 順次実行型テストの自動化を実践する

- 順次実行型テストの自動化
  - テストケース1つ1つを自動化する
  - テスト範囲が広いので、自動化対象の切り分けをちゃんと行い、メンテナンスを考慮して設計する必要がある
  - 一度にすべてを自動化しようとせず、優先順位付けをして、少しずつ範囲を広げていくように自動化していく

## 終わりに

- 自動テストで最も重要なのはプロセス
  - 自動テストのプロセスをしっかりと理解すれば、今度どのような自動化ツールが出てきても成功させることができる
- 本書は自動テストのプロセスに関する内容が中心。自動テストの技術・知識の基礎に関する内容をとりあげている
  - テスト技術やプログラム技術に関する詳細な説明は割愛している
- 自動テストのメリットはコスト削減だけでなく、人を単純作業から開放させて考える時間を増やすことができること
  - 自動テスト以外でもコストを削減する方法はたくさんある。自動テストで増えた時間を使ってよりコスト削減につながることを実施する
