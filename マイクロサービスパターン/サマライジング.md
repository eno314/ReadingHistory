# カイゼン・ジャーニー サマライジング

## 装丁読み

- 英題 : Microservices Patterns With examples in Java
- マイクロサービスのパターン
- 実践的なシステムのデザイン
- コード解説
- 解説が充実している
  - パターンによるシステム開発
  - 実装方法をJavaのサンプルコードで
- マイクロサービスの事案を成功させる
- 実践的ノウハウを集めている
- Chris Richardson
  - <https://twitter.com/crichardson>
  - <https://www.chrisrichardson.net/>
  - マイクロサービスのトレーニングとコンサルティングをやっている
  - [POJOs in Action](https://www.amazon.co.jp/Pojos-Action-Developing-Applications-Lightweight/dp/1932394583)という本も出している（日本語訳は無さそう）
    - SpringやHibernateなどのFWを使ってJavaEEのアプリを構築する方法を説明する本
  - [Microservices.io](https://microservices.io/)の作者

## はじめに

本書はマイクロサービス宣言ではなく、パターンのコレクションを中心として構成されている

パターン : 特定のコンテキストで発生する問題に対して繰り返し応用できるソリューション
パターンの良いところ : ソリューションの利点だけでなく欠点や問題点も明示されている
↓
パターンを知っていれば、より良い決定をすることができるようになる

## 監修者まえがき

マイクロサービスのゴールは「素早く、高頻度に、アプリを開発・リリース・メンテナンスすること」

サービスのサイズが小さくなるのはあくまで結果であり、ゴールじゃない。だから小さくすることを目的にしたり、格好から入るようなことは良くないよ。

本書は設計のノウハウを単純にリストアップしているわけではなく、レガシーなアプリをモダン化していくストーリーになっていて、その中でマイクロサービスに関する様々な知識を解説している。つまり、マイクロサービスの適用を疑似体験できる作りになっている。

## 本書について

本書の目的 : マイクロサービスアーキテクチャを使ったアプリケーション開発を成功させるための方法を学ぶ

マイクロサービスのメリットだけでなくデメリットも挙げ、どんなときにモノリシックにして、どんなときにマイクロサービスにするのかを学ぶことができる

## Chapter1

- モノリシックなアプリが大きくなりすぎたときに起きるヤバい状況の説明
- マイクロサービスアーキテクチャのパターン言語の概要説明
  - 本書の大部分はこの「パターン言語」をテーマとしている
  - （パターン言語ってどういう意味だろう）

## Chapter2

- ソフトウェアアーキテクチャが重要な理由の説明
- アプリケーションをサービスに分解するためのパターンを紹介
- サービスに分解する過程でぶつかる障害を乗り越える方法を紹介

## Chapter3

- マイクロサービスアーキテクチャで使われるプロセス間通信の様々なパターンを紹介
- 非同期のメッセージベース通信がベターになることが多く、その理由の説明

## Chapter4

- `Saga`パターンの説明
  - 非同期メッセージ＋トランザクション
  - サービス間でデータの整合性を維持する方法の説明

## Chapter5

- DDDの`Aggregate`と`Domain event`のパターンを使った、サービスのビジネスロジックを設計する方法を説明

## Chapter6

- `Event sourcing`パターンを使って、ビジネスロジックを開発する方法を説明
- イベントを中心としてビジネスロジックを組み立て、ドメインオブジェクトを永続化する

## Chapter7

- クエリーで複数のサービスに分散されているデータを集める方法を説明
- `API composition`パターン もしくは `CQRS`パターンを使う

## Chapter8

- 様々な外部クライアント(モバイルアプリやJS、サードパーティ等)からのリクエストを処理する外部APIパターンについての説明

## Chapter9

- マイクロサービスの自動テストに関するテクニックの話、その1
- テストピラミッドについてと、テストピラミッドの底辺に位置するユニットテストの書き方の説明

## Chapter10

- マイクロサービスの自動テストに関するテクニックの話、その2
- ユニットテスト以外の書き方の説明
  - 統合テスト
  - コンシューマ駆動契約テスト
  - コンポーネントテスト

## Chapter11

- 本番環境でマイクロサービスにする際のTIPS
  - セキュリティ
  - `Externalized configuration`パターン
  - 可観測性パターン(`Log aggregation`、`Application metrics`、`Distributed tracing`)

## Chapter12

- サービスのデプロイで使える様々なパターンの説明
  - 仮想マシン、コンテナ、サーバレス等
- サービスメッシュを使うことのメリット

## Chapter13

- モノリシックなアプリを段階的にマイクロサービスにリファクタリングしていく方法の説明
- `Strangler application`パターン

