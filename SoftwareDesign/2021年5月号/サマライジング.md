# Software Design 2021年5月号 サマライジング

## 装丁よみ

- SPECIAL FEATURE 1
  - ハンズオン
  - TCP/IP
  - コードで納得
  - ネットワークのしくみ
- SPECIAL FEATURE 2
  - PHP8
  - 移行のタイミング
  - 移行のコツ
  - 3点で考える
    - コーディング
    - JITコンパイラ
    - フレームワーク
- New Serialization
  - Raspberry Pi で エッジAPI
  - 体系的に学ぶ Docker ネットワークのしくみ

## SPECIAL FEATURE 1 ハンズオン TCP/IP

### 第1章 押さえておきたいネットワークの基本用語

- データの流れから見るプロトコルの役割とその挙動

### 第2章 ping を自作してネットワーク通信の実装を知る

- 「ピンを通す」裏側では何が起きているか

### 第3章 TCP によるソケットプログラミング

- ネットワークの根幹技術を体験

### 第4章 UDP によるソケットプログラミング

- 実践! NAT 越え、マルチキャスト

## SPECIAL FEATURE 2 PHP8 移行のタイミングとコツ

### 第1章 PHP8 でコーディングはどこまで変わる?

- 厳密かつ、より安全な仕様に進化
- 新機能
  - アトリビュート : 宣言と実装を分離することができる機構
  - match式 : 簡潔に条件分岐を書ける記法
- 機能改善
  - 型に対して柔軟だったがゆえに、わかりずらかった箇所が修正。移行の際にエラーとはならないが動作が変わる可能性がある。処理の見直すきっかけになる。

### 第2章 JIT コンパイラでどこまで速くなる?

- JIT(Just In Time)コンパイラ
  - プログラムが実行される直前に、そのプログラムをマシンのCPUに応じた機械語にコンパイルする
  - PHPでは、通常のコンパイルに加えて、JITコンパイルも行う -> 通常よりもコンパイルに時間がかかるが、実行スピードは上げられる
- 実際の効果
  - Webアプリケーションでは、I/O処理がボトルネックになり、JITコンパイラの恩恵はあまり得られない
  - CPUバウンドなアプリケーション(GUIアプリケーションや機械学習など)だと恩恵を受けられる
  - PHPが今まで不得手としていた領域に対して、可能性を示す機能

### 第3章 フレームワークやライブラリ、ツールはどう対応すべき?

- PHP8 では、いくつかの言語機能を廃止・変更していて、7から互換性がない部分もある
  - 自分たちの書いたコードに加え、使っているフレームワークやライブラリのサポート状況もチェックする必要がある
- フレームワークが対応されるのを待つだけでなく、OSSプロジェクトへの貢献も考えたほうが良い


## ITエンジニア必須の最新用語解説 「Flutter2」

- Flutter : Googleによって開発されている、クロスプラットフォーム対応の、アプリケーション開発フレームワーク
- Flutter2の新機能
  - Webアプリ対応機能(Flutter for Web)が安定版になった。
    - CanvasKit と呼ばれる新しいレンダラーが追加。Canvasに直接UIを描画することで、DOM操作よりも極めて高速なレンダリングを実現。
  - デスクトップ対応機能も2021年後半の安定版リリース予定
  - Dartのバージョンアップ(2.12)
    - Sounds Null Safety : nullを許容する変数と許容しない変数を明示的に宣言できる
    - Foreign Function Interface (FFI) : 別の言語で記述された機能を Dart から直接利用できるようにする。Dart以外のコード資産をよりシームレスに活用できる。

## "学習する"チームで仕事をする 「エンジニアリングチームのメトリクスと目標」

- エンジニアリングチームの目標設定は難しい
- 自分たちが「ビジネス全体の何に貢献して」「なぜ事業が成立しているのか」を明らかにすることが第一歩

## イラストで明解 Git コマンド 「`git fetch/checkout`」

- fetch
  - リモートリポジトリの変更履歴をローカルリポジトリに取り込む
  - リモートリポジトリは複数人が利用することになるので、自分以外の人が追加したコミットを取り込むためのコマンド
  - 変更の履歴が内部的に取り込まれるだけで、実際のリポジトリにあるファイルに変更は加えられない
- checkout
  - 大きく2つの機能がある
  - 「ブランチを切り替える機能」「指定したファイルを直前のコミットの状態に戻す機能」

## チーム開発の視点が変わる アジャイル開発の新常識 「アジャイル開発のマイクロサービス化に欠かせない可観測性」

- マイクロサービスを採用することに伴う課題 : システムの複雑化により、予期せぬ障害が発生する可能性がある
  - ネットワークを介してサービス間のやりとりを行うので、通信失敗時の考慮(リトライ等)が必要
  - データ整合(アトミック)性の担保が難しい
  - 更新対象のサービスが他から呼ばれていて、更新内容が破壊的な場合、独立してそこだけデプロイすることができない
- 改題の対応法方法 : システムが可観測性(オブザーバビリティ)を持つ必要がある
  - メトリクス、ログ、トレース が可観測性の3つの柱
  - メトリクス : システムの全体的な状態を観測するためのもの。個別のリクエストを詳細に調査する用途には適さない。
  - ログ : もっともきめ細かい情報を提供する。
  - トレース : マイクロサービスなどの分散システムでの、エンドツーエンドのトランザクションを観測可能にする
- アジャイルチームにおいて、インフラもチーム各人が自分ごととして考えないといけない重要なテーマ

## パズルで鍛えるアルゴリズム 天秤パズルを通して、ソートアルゴリズムを学ぶ

## 体系的に学ぶ Docker ネットワークのしくみ 「Dockerネットワークの全体像と技術要素」

- Docker で使われているネットワークの要素技術
  - network namespace : Dockerでは、コンテナごとにネットワークの名前空間が用意され、それぞれが独立してお互いに影響が出ないようにしている
  - iptables : ファイアウォールとルータの機能を備えたツール
  - VXLAN : VLANの上位互換
- 今後
  - ネットワークの超基本 : インターネット通信の全体像や、ルーティングのしくみの解説
  - 重要な技術「network namespace」「iptables」「VXLAN」の詳細を解説
  - Docker ネットワークのデフォルト設定について、コンテナを操作しながらしくみを説明
  - 実際のシステム構築に向けて、自前で Docker のネットワークを構築し、通信させる
