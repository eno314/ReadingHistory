# ドメイン駆動設計入門

## メンタルマップ

### 何故この本を読もうと思ったのか

ドメイン駆動設計のパターンの理解がイマイチなものがあり、それを学びたいと思ったから。

### この本から何を得たいのか

- 値オブジェクト・エンティティ・リポジトリ・ファクトリが自分の理解と間違っていないか確認する
- ドメインサービス・アプリケーションサービス・集約・仕様のパターンがどういうもので、どんな処理を書けば良いのかを理解する
- ヘキサゴナルアーキテクチャがどのような構成になるのか理解できる

### 読んだ後、どういう状態になりたいか

- ドメイン駆動設計のパターンを仕事でも実践することができる

## 感想

- 技術的なことだけやる軽量DDDに対してネガティブな意見がよく目につくけど、この本では軽量DDDにもメリットがあって、技術的なことを知っておけば本格的なDDDを始めやすいんだよ、という考え方をもとに書かれているのが良いなと思った。
- 個人的には曖昧だったドメインサービス・アプリケーションサービス・集約・仕様のパターンの実装方法が、この本の解説+サンプルコードのおかげで腹落ちできたのが良かった。
- 最終的に、どういうディレクトリ構成案にするのが良いのかも説明してくれているのが参考になる。

## アクションプラン

- ディレクトリ構成案をサンプルコードにするところまで書く

## ディレクトリ構成案

この本を読んで仕事で試したいディレクトリ構成案

### 依存関係図

infrastructure -> usecase -> domain
presentation

なるべくdomainを直接infrastructureやpresentationに依存させない

### 詳細

#### domain

```:
├── contextA     # 境界づけられたコンテキストの名前ごとにディレクトリを分ける
│   ├── XXX      # 意味的なまとまりでディレクトリを分ける
│   │   ├── aggregation
│   │   ├── entity
│   │   ├── repository
│   │   ├── spec
│   │   └── value
│   ├── YYY
│   ├── ZZZ
│   └── service  # 複数の意味を横断して処理するserviceは、ここに置く
└── contextB
```

#### application (usecase)

個人的にはapplicationよりも、usecaseのほうが色んな人が見たときに伝わりやすいんじゃないかなと思った。

```:
├── XXX
│   ├── applicationService
│   ├── client     # データを取得するためのインタフェース(domainをインフラから直接参照しないために用意)
│   ├── command
│   ├── dto
│   └── repository # repositoryの実装オブジェクト
├── YYY
└── ZZZ
```

#### infrastructure

```:
├── A  # 各データソース
│   ├── client  # clientの実装オブジェクト
│   ├── ddd     # 各データソースごとに必要なクラス
│   └── eee
├── B
└── C
```

#### presentation

```:
├── XXX
│   ├── controller
│   ├── fff
│   └── ggg  # 各プレゼンテーションに必要なクラス
├── YYY
└── ZZZ
```

