# ドメイン駆動設計入門 各章のメモ

## 装丁読み

- ドメイン駆動設計 (DDD)
- 入門
- ボトムアップ
- 学習しやすい
- パターン
- コードを見ながら
- 基礎を取得
- 値オブジェクト
- エンティティ
- ドメインサービス
- リポジトリ
- アプリケーションサービス
- ファクトリ
- 集約
- 仕様
- アーキテクチャ完成サンプル収録
- 成瀬允宣
  - <https://nrslib.com/>

## Chapter1

## Chapter2

値オブジェクトの基準が参考になる。判断する際は「ルールが存在するか」「それ単体で扱いたいか」を意識するようにしようと思った。

## Chapter3

- 人間の例は分かりやすかったなあ。人に説明するときの参考になる。
- エンティティクラスには今までKotlinのdata classや、JavaのlombokのEqualsAndHashCodeを付けるか付けないか悩ましい
  - 本来の意味的には付けないほうが良いんだろけど、テスト等で比較する際にはあったほうが便利なことが多いんだよな
  - equalEntityみたいなエンティティ特有の比較メソッドを用意するのもありかもしれない

## Chapter4

- ドメインサービスとアプリケーションサービスの基準も参考になる
  - ドメイン知識であればドメインサービスにする（ただし、エンティティや値オブジェクトの振る舞いとしては変な場合のみ）
  - アプリケーションを作成するにあたって必要になった処理・ロジックであればアプリケーションサービスにする
- ドメインサービスの命名規則も自分はService付けたほうが良いかなと思った。そのほうが値やエンティティとの区別が付きやすし

## Chapter5

- 最近リポジトリはなるべく作るようにしているから、逆にリポジトリを用意しないコードを見ることで、それがいかに分かりにくいかが良く分かる例だった
- リポジトリをモックではなく、テスト用の実装クラスを使ったテストは、シナリオテスト的な場合に役に立ちそうだな。モックだと状態を持たせるのが難しいし。

## Chapter6

- サンプルも内容も多めで参考になりそうだからあとで写経したい。
- 「ドメインオブジェクトをアプリケーションサービスで受け渡しするのは良くない」というのはCleanArchitectureでも書いてあったことだし、理解できる。とはいえ実際に仕事で取り入れようとすると、やっぱり無駄な感じがして中々出来ないんだよなあ。ドメインオブジェクトを使ってDTOを組み立てたり、引数にはコマンドオブジェクトを使うといったテクニックは良いなと思ったから、これを上手く使って無駄な感じを少なくして、取り入れていきたいなと思う。

## Chapter7

- ServiceLocatorパターンはしらなかったけど、基本的にはDIのほうを使っておけば良さそう。コードがぱっと見ただけだとあんまり理解できなかったらから、後で写経はしておきたい

## Chapter8

- ここは今までの振り返りの章なのでサンプルコード多めだから写経対象

## Chapter9

- ファクトリを作る基準を、「コンストラクタ内で他のオブジェクトを生成するかどうか」とするのは良いなと思った。取り入れてみよう。
- ファクトリの存在に気づかせるために、「生成するオブジェクトの近くにファクトリクラスを定義する」というのもなるほどなと思った。これも取り入れてみる

## Chapter10

- 最近、仕事ではJava (Spring) ばっかり使っていたからAOPのトランザクションに慣れてしまったけど、他の言語・フレームワークでトランザクションをどうすればいいかは練習しておきたいなと思った。

## Chapter11

- ここも写経対象

## Chapter12

- ch11からの続きな立ち位置なので、11と一緒に写経するのが良さそう

## Chapter13

- オブジェクトの評価の処理を仕様（Specification）クラスにするということは今まで全然やってきてなかった。これから使ってみよう。
  - ファーストクラスコレクションを利用するテクニックも参考になる。使ってみたい。
- 仕様とリポジトリを組み合わせる項は読んだだけだとイメージ沸かなかったから、ここだけ写経したい

## Chapter14

- ここも写経対象

## Chapter15

- 開発者とドメインエキスパートの仲介者になるのではなく、開発者とドメインエキスパートが直接会話する機会を増やすように働きかける。この考え方は意識したいな。
- ユビキタス言語をコードにそのまま記述するのもあんまり出来ていないな。。そもそもチーム内でのユビキタス言語の浸透もいまいちなんだよな。やっぱりDDDってチームビルディングも重要な要素なんだよな。
- ユビキタス言語の協会が、コンテキストの境界になるっていうのがこれを読むまで忘れていた。振り返り出来てよかった。

## Appendix

### A.1

- パッケージを分けるときは、属性ではなく、意味的なまとまりで分けると良いか。最近、属性で分けることばっかりやっていたから、意味的なまとまりで分けるのも試してみようかな。
-

### A.2

